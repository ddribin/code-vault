	PAGE	78,132
	TITLE	MP0	your name	current date

	CR	EQU	0Dh
	LF	EQU	0Ah
	BEL	EQU	07h
	ESCKEY	EQU	1Bh

COMMENT *
	This program illustrates LIB291 input and output routines plus
	a simple subroutine call for I/O.
	*

	EXTRN	KBDIN:NEAR, DSPOUT:NEAR, DSPMSG:NEAR, DOSXIT:NEAR

STKSEG	SEGMENT STACK			; *** STACK SEGMENT ***
	DB	64 DUP ('STACK   ')
STKSEG  ENDS

CSEG	SEGMENT PUBLIC			; *** CODE SEGMENT ***
        ASSUME  CS:CSEG, DS:CSEG, SS:STKSEG, ES:NOTHING

HDMSG	DB	'MPD: Type "N" or the "ESC" key','$'
PROMPT	DB	CR,LF,'MPD:','$'
XITMSG	DB	CR,LF,'MPD: Exit to DOS','$'
USRNAME DB	CR,LF,'your name','$'

MAIN    PROC    FAR
	MOV	AX, CSEG		; INITIALIZE DS REGISTER
	MOV	DS, AX
	MOV	DX, OFFSET HDMSG	; DX = ADDRESS OF HDMSG
	CALL	DSPMSG			; DISPLAY IT
TOPLP:	MOV	DX, OFFSET PROMPT	; PROMPT FOR LETTER COMMAND
	CALL	DSPMSG
	CALL	KBDIN			; GET KBD CHAR IN AL
	CMP	AL, ESCKEY		; EXIT ON ESC CHAR
	JE	MPDXIT
	CMP	AL, 'N'
	JE	PRNAME
	MOV	DL, BEL 		; RING THE BELL
	CALL	DSPOUT
	JMP	TOPLP

PRNAME: MOV	DX, OFFSET USRNAME	; TYPE OUT USER NAME
	CALL	DSPMSG
	JMP	TOPLP

MPDXIT: MOV	DX, OFFSET XITMSG	; TYPE OUT EXIT MESSAGE
	CALL	DSPMSG
	CALL	DOSXIT			; EXIT TO DOS
MAIN	ENDP

CSEG	ENDS
	END	MAIN
